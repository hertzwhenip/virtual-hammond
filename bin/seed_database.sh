#! /usr/bin/env bash

set -e

#############################################################################
### HELPERS
#############################################################################

msg() {
    echo "$1"
    sleep 0.1
}

#############################################################################
### CONFIGURATION
#############################################################################

db="hammond.sqlite3"

#############################################################################
### MAIN
#############################################################################

main() {
    msg ">>> Changing into database directory..."

    cd "../server/database"
    msg "  Changed into database directory."

    msg ">>> Running seeds..."

    for file in $(find ./seeds -name '*.sql'); do
        cat $file | sqlite3 "$db"
        msg "  Seeded $file."
    done
}

#############################################################################
### BOOTSTRAP
#############################################################################

main "$@"
